{% extends "base.html" %}
{% block content %}

<h1 class="h4 mb-3">Order #{{ order.id }}</h1>
<p class="text-muted mb-4">
  Placed on {{ order.created_at|date:"M j, Y H:i" }} · Status:
  <span class="badge bg-secondary">{{ order.status }}</span>
</p>

<div class="card">
  <div class="table-responsive">
    <table class="table mb-0 align-middle">
      <thead>
        <tr>
          <th>Ticket</th>
          <th class="text-end">Qty</th>
          <th class="text-end">Unit</th>
          <th class="text-end">Total</th>
        </tr>
      </thead>
      <tbody>
        {% for item in order.items.all %}
        <tr>
          <td>
            {{ item.ticket_type.event.title }} — {{ item.ticket_type.name }}
          </td>
          <td class="text-end">{{ item.qty }}</td>
          <td class="text-end">${{ item.unit_price }}</td>
          <td class="text-end">
            ${{ item.line_total|floatformat:2 }}
          </td>
        </tr>
        {% empty %}
        <tr><td colspan="4" class="text-muted">No items in this order.</td></tr>
        {% endfor %}
      </tbody>
      <tfoot>
        <tr>
          <th colspan="3" class="text-end">Grand total</th>
          <th class="text-end">${{ order.total|floatformat:2 }}</th>
        </tr>
      </tfoot>
    </table>
  </div>
</div>

<a href="{% url 'my_orders' %}" class="btn btn-outline-primary mt-3">Back to My Orders</a>
{% endblock %}
